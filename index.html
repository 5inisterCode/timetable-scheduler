<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° html2canvas ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script src="course_data.js"></script>
    <script src="script.js" defer></script>
</head>

<body>

    <!-- Header -->
    <div class="top-header">
        <div style="display:flex; align-items:center; gap:15px;">
            <h1>‚ú® ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
            <span id="total-credits-badge"
                style="background:#e0f2fe; color:#0284c7; padding:4px 12px; border-radius:20px; font-size:12px; font-weight:700;">
                0 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï
            </span>
        </div>
        <div class="header-actions" style="display:flex; align-items:center; gap:10px;">
            
            <!-- Plan Switcher -->
            <div class="flex bg-slate-200 p-1 rounded-lg mr-2">
                <button id="btn-plan-A" onclick="switchPlan('A')" 
                    class="px-4 py-1.5 rounded-md text-xs font-bold shadow bg-white text-blue-600 transition-all">
                    Plan A
                </button>
                <button id="btn-plan-B" onclick="switchPlan('B')" 
                    class="px-4 py-1.5 rounded-md text-xs font-bold text-gray-500 hover:bg-white/50 transition-all">
                    Plan B
                </button>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏° -->
            <button onclick="downloadScheduleImage()" class="btn-action" style="background-color:#3b82f6; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-weight:600; font-size:13px; display:flex; align-items:center; gap:5px;">
                <span>üì∑</span> Download Image
            </button>

            <button onclick="openSearchModal()" class="btn-action" style="background-color:#F26522; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-weight:600; font-size:13px; display:flex; align-items:center; gap:5px;">
                <span>üîç</span> Reg Search
            </button>
            
            <button onclick="openAddCustomModal()" class="btn-action btn-success" style="background-color:#10b981; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-weight:600; font-size:13px;">
                <span>+</span> ‡∏ß‡∏¥‡∏ä‡∏≤‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
            </button>
            <button onclick="clearAllCourses()" class="btn-action btn-danger" style="background-color:#ef4444; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-weight:600; font-size:13px;">
                <span>üóëÔ∏è</span> ‡∏•‡πâ‡∏≤‡∏á
            </button>
        </div>
    </div>

    <!-- Layout ‡∏´‡∏•‡∏±‡∏Å -->
    <div class="app-container">

        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="mb-4">
                    <label
                        class="block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wide">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£</label>
                    <select id="curriculum-select" onchange="changeCurriculum()"
                        class="w-full p-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="CS">‡∏ß‡∏ó.‡∏ö. ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (CS)</option>
                        <option value="IT">‡∏ß‡∏ó.‡∏ö. ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® (IT)</option>
                        <option value="FREE">‡∏´‡∏°‡∏ß‡∏î‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏£‡∏µ (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ì‡∏∞)</option>
                    </select>
                </div>

                <h3 class="text-sm font-bold text-gray-700 mb-2">üìö ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏ô</h3>
                <input type="text" id="course-search" class="search-box" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤..."
                    onkeyup="filterCourses()">
            </div>
            <div id="course-menu" class="course-list custom-scrollbar">
                <!-- ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
        </aside>

        <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ -->
        <main class="timetable-area custom-scrollbar" id="capture-area" style="overflow-y: auto;"> 
            
            <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
            <div class="table-wrapper custom-scrollbar">
                <table>
                    <thead>
                        <tr class="header-row">
                            <th class="time-col-header">‡πÄ‡∏ß‡∏•‡∏≤</th>
                            <th>8:00 - 8:50</th>
                            <th>9:00 - 9:50</th>
                            <th>10:00 - 10:50</th>
                            <th>11:00 - 11:50</th>
                            <th>12:00 - 12:50</th>
                            <th>13:00 - 13:50</th>
                            <th>14:00 - 14:50</th>
                            <th>15:00 - 15:50</th>
                            <th>16:00 - 16:50</th>
                            <th>17:00 - 17:50</th>
                            <th>18:00 - 18:50</th>
                        </tr>
                    </thead>
                    <tbody id="timetable-body">
                        <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </tbody>
                </table>
            </div>

            <!-- NEW: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≠‡∏ö (Exam Schedule) -->
            <!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô w-80 (320px) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô -->
            <div id="exam-schedule-section" class="mt-8 pt-6 border-t border-dashed border-gray-300 hidden">
                <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                    üìÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≠‡∏ö (Exam Schedule)
                    <span class="text-[10px] font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full border">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</span>
                </h3>
                <div class="overflow-hidden rounded-lg border border-gray-200 shadow-sm">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-b">
                            <tr>
                                <th scope="col" class="px-4 py-3 w-24">‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤</th>
                                <th scope="col" class="px-4 py-3">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤</th>
                                <!-- ‡∏õ‡∏£‡∏±‡∏ö w-48 ‡πÄ‡∏õ‡πá‡∏ô w-80 (‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô) -->
                                <th scope="col" class="px-4 py-3 w-80 bg-orange-50 text-orange-800 border-l border-orange-100">
                                    ‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ (Midterm)
                                </th>
                                <!-- ‡∏õ‡∏£‡∏±‡∏ö w-48 ‡πÄ‡∏õ‡πá‡∏ô w-80 (‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô) -->
                                <th scope="col" class="px-4 py-3 w-80 bg-blue-50 text-blue-800 border-l border-blue-100">
                                    ‡∏™‡∏≠‡∏ö‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ (Final)
                                </th>
                            </tr>
                        </thead>
                        <tbody id="exam-table-body" class="bg-white divide-y divide-gray-100">
                            <!-- ‡πÅ‡∏ñ‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

    <!-- Modal 1: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ -->
    <div id="confirm-modal"
        class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="modal-content">
            <h3>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</h3>
            <div id="confirm-msg" class="course-preview"></div>

            <div class="form-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                <select id="confirm-duration">
                    <option value="1">1 ‡∏ä‡∏°.</option>
                    <option value="3" selected>2 ‡∏ä‡∏°.</option>
                    <option value="2">3 ‡∏ä‡∏°.</option>
                    <option value="4">4 ‡∏ä‡∏°.</option>
                </select>
            </div>
            <div class="form-group">
                <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ (Theme)</label>
                <div class="color-picker-wrapper">
                    <input type="color" id="confirm-color" value="#dae8fc">
                </div>
            </div>
            <div class="modal-actions">
                <button onclick="closeModal('confirm-modal')" class="btn-cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="confirmAddCourse()" class="btn-confirm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </div>
    </div>

    <!-- Modal 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏≠‡∏á -->
    <div id="add-custom-modal"
        class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="modal-content">
            <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>

            <div class="p-4 space-y-3">
                <div>
                    <label class="block text-xs font-bold text-gray-500 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤</label>
                    <input type="text" id="custom-code"
                        class="w-full p-2 border rounded outline-none focus:border-blue-500" placeholder="‡πÄ‡∏ä‡πà‡∏ô 001234">
                </div>
                <div>
                    <label class="block text-xs font-bold text-gray-500 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)</label>
                    <input type="text" id="custom-name"
                        class="w-full p-2 border rounded outline-none focus:border-blue-500" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤...">
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                        <select id="custom-day" class="w-full p-2 border rounded outline-none">
                            <option value="Monday">‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</option>
                            <option value="Tuesday">‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</option>
                            <option value="Wednesday">‡∏û‡∏∏‡∏ò</option>
                            <option value="Thursday">‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ</option>
                            <option value="Friday">‡∏®‡∏∏‡∏Å‡∏£‡πå</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</label>
                        <select id="custom-start" class="w-full p-2 border rounded outline-none">
                            <option value="8">8:00</option>
                            <option value="9">9:00</option>
                            <option value="10">10:00</option>
                            <option value="11">11:00</option>
                            <option value="12">12:00</option>
                            <option value="13">13:00</option>
                            <option value="14">14:00</option>
                            <option value="15">15:00</option>
                            <option value="16">16:00</option>
                            <option value="17">17:00</option>
                            <option value="18">18:00</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</label>
                        <select id="custom-duration" class="w-full p-2 border rounded outline-none">
                            <option value="1">1 ‡∏ä‡∏°.</option>
                            <option value="3" selected>2 ‡∏ä‡∏°.</option>
                            <option value="2">3 ‡∏ä‡∏°.</option>
                            <option value="4">4 ‡∏ä‡∏°.</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡∏™‡∏µ‡∏ß‡∏¥‡∏ä‡∏≤</label>
                        <div class="h-[38px] w-full border rounded overflow-hidden">
                            <input type="color" id="custom-color" value="#d5e8d4"
                                class="w-full h-full cursor-pointer p-0 border-none">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="closeModal('add-custom-modal')" class="btn-cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="confirmAddCustomCourse()"
                    class="btn-confirm bg-green-600 hover:bg-green-700">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Modal 3: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô Reg -->
    <div id="search-modal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center p-4 modal-backdrop">
        <div class="modal-content" style="width: 400px;">
            <div style="background: linear-gradient(135deg, #F26522 0%, #d3541c 100%); padding: 20px; text-align: center; color: white;">
                <div style="font-size: 40px; margin-bottom: 10px;">üîç</div>
                <h3 style="background:none; border:none; color:white; padding:0; margin-bottom:5px;">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏≤‡∏Å Reg</h3>
                <p style="font-size: 12px; opacity: 0.9;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏™‡∏≠‡∏ö (Real-time)</p>
            </div>

            <div class="p-5 space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-500 mb-1">‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤ / ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤)</label>
                    <input type="text" id="reg-search-query" 
                        class="w-full p-3 border-2 border-orange-100 rounded-lg outline-none focus:border-orange-500 text-lg" 
                        placeholder="‡πÄ‡∏ä‡πà‡∏ô 204101"
                        onkeypress="handleSearchEnter(event)">
                </div>

                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                        <select id="reg-search-year" class="w-full p-2 border rounded outline-none bg-gray-50">
                            <option value="2568">2568</option>
                            <option value="2567" selected>2567</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‡πÄ‡∏ó‡∏≠‡∏°</label>
                        <select id="reg-search-sem" class="w-full p-2 border rounded outline-none bg-gray-50">
                            <option value="1">1 (‡∏ï‡πâ‡∏ô)</option>
                            <option value="2" selected>2 (‡∏õ‡∏•‡∏≤‡∏¢)</option>
                            <option value="3">3 (‡∏£‡πâ‡∏≠‡∏ô)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button onclick="closeModal('search-modal')" class="btn-cancel">‡∏õ‡∏¥‡∏î</button>
                <button onclick="performRegSearch()" class="btn-confirm" style="background-color: #F26522;">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‚ûú</button>
            </div>
        </div>
    </div>

</body>

</html>